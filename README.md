```
     _                                 _____         _              _       ____                       
    | | __ _  ___  __ _  ___ _ __     |  ___|_ _ ___| |_ __ _ _ __ (_)     |  _ \  ___ _ __ ___   ___  
 _  | |/ _` |/ _ \/ _` |/ _ \ '__|____| |_ / _` / __| __/ _` | '_ \| |_____| | | |/ _ \ '_ ` _ \ / _ \ 
| |_| | (_| |  __/ (_| |  __/ | |_____|  _| (_| \__ \ || (_| | |_) | |_____| |_| |  __/ | | | | | (_) |
 \___/ \__,_|\___|\__, |\___|_|       |_|  \__,_|___/\__\__,_| .__/|_|     |____/ \___|_| |_| |_|\___/ 
                  |___/                                      |_|                                       
```
---
# Project description
This project is demo for fastapi with open-telemetry, if there are some mistakes, please leave issues to me.

---
# Quick Start

## Prerequisite
- Python 3.8
- K8s cluster

## Initialize Jaeger server

#### deploy the Jaeger server and svc with provided yaml file
- you could choose all-in-one yaml file first
- if you did not wanna build elasticsearch, you could comment the storage type env in configmap

## Development

#### Initial venv

```shell
python -m venv venv
source ./venv/bin/activate
pip install -r requirements.txt
```

#### Create .env file

```shell
# The valid environment variables can be found from Parameter Store of K8S Configmap
cp env.example .env
```

## Development Run

Run develop with auto-reload

```
# As uvicorn app
uvicorn fastapi_jaeger:app --reload
```

## Production run

```
docker build -t fastapi-jaeger-example .
cd k8s_deploy_files/prod/
kubectl apply -f app_deployment.yaml
```

## Swagger doc
- interactive API documentation generated by Fastapi automatically
  - visit `{protocol}://{domain}:{port}/docs`
